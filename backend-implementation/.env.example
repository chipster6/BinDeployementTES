# =============================================================================
# WASTE MANAGEMENT SYSTEM - ENVIRONMENT CONFIGURATION TEMPLATE
# =============================================================================
#
# Copy this file to .env (development) or .env.production (production)
# Replace all placeholder values with actual secrets before deployment
#
# SECURITY WARNING: Never commit actual secrets to version control
# Use the setup-secrets.sh script to generate secure values
#
# Generated by: Backend API Integration & Production Deployment Configuration
# Date: 2025-08-23
# =============================================================================

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
NODE_ENV=production
PORT=3001
FRONTEND_PORT=3000
HOST=0.0.0.0
API_VERSION=v1

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL with PostGIS)
# =============================================================================
DB_HOST=postgres
DB_PORT=5432
DB_NAME=waste_management
DB_USERNAME=postgres
DB_PASSWORD=REPLACE_WITH_ACTUAL_DB_PASSWORD

# Database SSL Configuration
DB_SSL=true
DB_SSL_REQUIRE=true
DB_SSL_REJECT_UNAUTHORIZED=true

# Connection Pool Settings (Production Optimized)
DB_POOL_MIN=30
DB_POOL_MAX=180
DB_POOL_ACQUIRE=60000
DB_POOL_IDLE=300000
DB_CONNECTION_TIMEOUT=60000
DB_QUERY_TIMEOUT=30000

# Query Performance
DB_LOGGING=false
DB_BENCHMARK=false
DEBUG_SQL=false

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=REPLACE_WITH_ACTUAL_REDIS_PASSWORD
REDIS_DB=0
REDIS_KEY_PREFIX=waste_mgmt:
REDIS_TTL_DEFAULT=3600
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=1000

# Redis Session Store
REDIS_SESSION_DB=1
REDIS_SESSION_TTL=86400

# Redis Queue System
REDIS_QUEUE_DB=2
REDIS_QUEUE_PREFIX=waste_management:queue

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT Configuration (RS256 Algorithm for Production Security)
JWT_ALGORITHM=RS256
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=waste-management-api
JWT_AUDIENCE=waste-management-users

# JWT Keys (Generated by setup-secrets.sh)
JWT_PRIVATE_KEY_PATH=./secrets/jwt_private_key
JWT_PUBLIC_KEY_PATH=./secrets/jwt_public_key
JWT_REFRESH_PRIVATE_KEY_PATH=./secrets/jwt_refresh_private_key
JWT_REFRESH_PUBLIC_KEY_PATH=./secrets/jwt_refresh_public_key

# Encryption (AES-256-GCM)
ENCRYPTION_KEY=REPLACE_WITH_ACTUAL_ENCRYPTION_KEY

# Session Management
SESSION_SECRET=REPLACE_WITH_ACTUAL_SESSION_SECRET
SESSION_MAX_AGE=86400000
SESSION_SECURE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=strict

# Security Settings
HASH_ROUNDS=12
FORCE_HTTPS=true
TRUST_PROXY=true
SECURE_COOKIES=true

# CORS Configuration
CORS_ORIGIN=https://yourdomain.com
CORS_CREDENTIALS=true
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# =============================================================================
# EXTERNAL SERVICE INTEGRATIONS
# =============================================================================

# Stripe Payment Processing
STRIPE_SECRET_KEY=REPLACE_WITH_ACTUAL_STRIPE_SECRET_KEY
STRIPE_PUBLISHABLE_KEY=REPLACE_WITH_ACTUAL_STRIPE_PUBLISHABLE_KEY
STRIPE_WEBHOOK_SECRET=REPLACE_WITH_ACTUAL_STRIPE_WEBHOOK_SECRET
STRIPE_API_VERSION=2023-10-16

# Twilio SMS Services
TWILIO_ACCOUNT_SID=REPLACE_WITH_ACTUAL_TWILIO_ACCOUNT_SID
TWILIO_AUTH_TOKEN=REPLACE_WITH_ACTUAL_TWILIO_AUTH_TOKEN
TWILIO_PHONE_NUMBER=REPLACE_WITH_ACTUAL_TWILIO_PHONE_NUMBER

# SendGrid Email Services
SENDGRID_API_KEY=REPLACE_WITH_ACTUAL_SENDGRID_API_KEY
SENDGRID_FROM_EMAIL=noreply@yourdomain.com
SENDGRID_FROM_NAME=Waste Management System

# Samsara Fleet Management
SAMSARA_API_TOKEN=REPLACE_WITH_ACTUAL_SAMSARA_API_TOKEN
SAMSARA_WEBHOOK_SECRET=REPLACE_WITH_ACTUAL_SAMSARA_WEBHOOK_SECRET
SAMSARA_BASE_URL=https://api.samsara.com

# Airtable Integration
AIRTABLE_API_KEY=REPLACE_WITH_ACTUAL_AIRTABLE_API_KEY
AIRTABLE_BASE_ID=REPLACE_WITH_ACTUAL_AIRTABLE_BASE_ID

# Mapbox/GraphHopper Route Optimization
MAPBOX_ACCESS_TOKEN=REPLACE_WITH_ACTUAL_MAPBOX_ACCESS_TOKEN
MAPBOX_STYLE_URL=mapbox://styles/mapbox/streets-v11
GRAPHHOPPER_API_KEY=REPLACE_WITH_ACTUAL_GRAPHHOPPER_API_KEY

# =============================================================================
# AI/ML SERVICES CONFIGURATION
# =============================================================================

# Weaviate Vector Database
WEAVIATE_URL=http://weaviate:8080
WEAVIATE_HOST=weaviate
WEAVIATE_PORT=8080
WEAVIATE_SCHEME=http
WEAVIATE_API_KEY=REPLACE_WITH_ACTUAL_WEAVIATE_API_KEY
WEAVIATE_TIMEOUT=30000

# ML Services
ML_SERVICES_URL=http://ml-services:3000
ML_SERVICES_TIMEOUT=60000

# Route Optimization Engine
ROUTE_OPTIMIZATION_ENABLED=true
ROUTE_OPTIMIZATION_CACHE_TTL=3600
ROUTE_OPTIMIZATION_MAX_WAYPOINTS=25

# Predictive Analytics
PREDICTIVE_ANALYTICS_ENABLED=true
FORECASTING_MODEL_PATH=./models/forecasting
CHURN_PREDICTION_MODEL_PATH=./models/churn_prediction

# Local LLM Configuration
LLM_SERVICE_URL=http://llm-service:8000
LLM_SERVICE_TIMEOUT=120000
LOCAL_LLM_ENABLED=false
LOCAL_LLM_MODEL_PATH=./models/llama-3.1-8b
LOCAL_LLM_MAX_TOKENS=4096
LOCAL_LLM_TEMPERATURE=0.7

# Feature Flags for AI/ML Services
ENABLE_ML_ROUTE_OPTIMIZATION=true
ENABLE_ML_PREDICTIVE_ANALYTICS=true
ENABLE_ML_VECTOR_SEARCH=true
ENABLE_ML_LLM_ASSISTANT=false

# =============================================================================
# BACKGROUND JOBS CONFIGURATION
# =============================================================================
QUEUE_REDIS_HOST=redis
QUEUE_REDIS_PORT=6379
QUEUE_REDIS_DB=1
ENABLE_QUEUE_DASHBOARD=false
QUEUE_DASHBOARD_PORT=3003

# Job Processing
MAX_JOB_ATTEMPTS=3
JOB_TIMEOUT=300000
CLEANUP_COMPLETED_JOBS=true
COMPLETED_JOBS_TTL=86400

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================
NEXT_PUBLIC_API_URL=https://api.yourdomain.com
NEXT_PUBLIC_WEBSOCKET_URL=wss://ws.yourdomain.com
NEXT_PUBLIC_APP_NAME=Waste Management System
NEXT_PUBLIC_APP_VERSION=1.0.0

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Prometheus Metrics
ENABLE_PROMETHEUS_METRICS=true
PROMETHEUS_PORT=9090
PROMETHEUS_METRICS_PATH=/metrics
PROMETHEUS_RETENTION_TIME=90d
PROMETHEUS_RETENTION_SIZE=50GB
PROMETHEUS_LOG_LEVEL=info
METRICS_COLLECTION_INTERVAL=30000

# Grafana Dashboard
GRAFANA_PORT=3004
GRAFANA_USER=admin
GRAFANA_PASSWORD=REPLACE_WITH_ACTUAL_GRAFANA_PASSWORD
GRAFANA_DOMAIN=monitoring.yourdomain.com
GRAFANA_COOKIE_SECURE=true

# AlertManager
ALERTMANAGER_PORT=9093
ALERTMANAGER_LOG_LEVEL=info

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_REDIS=true
HEALTH_CHECK_EXTERNAL_APIS=true
HEALTH_CHECK_ML_SERVICES=true
HEALTH_CHECK_INTERVAL=30000
DEEP_HEALTH_CHECK_INTERVAL=300000
HEALTH_CHECK_TIMEOUT=5000

# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=json
LOG_TIMESTAMP=true
LOG_CORRELATION_ID=true
LOG_REQUEST_DETAILS=true
LOG_MAX_SIZE=100m
LOG_MAX_FILES=5
LOG_COMPRESS=true

# APM Integration
ENABLE_APM=true
APM_SERVICE_NAME=waste-management-api
APM_ENVIRONMENT=production

# Error Tracking
SENTRY_DSN=REPLACE_WITH_ACTUAL_SENTRY_DSN
SENTRY_ENVIRONMENT=production
SENTRY_SAMPLE_RATE=0.1

# =============================================================================
# PERFORMANCE OPTIMIZATION
# =============================================================================

# Response Compression
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=6
COMPRESSION_THRESHOLD=1024

# Caching Strategy
ENABLE_RESPONSE_CACHING=true
CACHE_ENABLED=true
CACHE_TTL=300
CACHE_MAX_SIZE=1000
CACHE_CHECK_PERIOD=600
CACHE_CONTROL_MAX_AGE=300
ETAG_GENERATION=true

# Request/Response Settings
REQUEST_TIMEOUT=30000
KEEP_ALIVE_TIMEOUT=65000
HEADERS_TIMEOUT=66000
MAX_FILE_SIZE=10mb
MAX_REQUEST_SIZE=50mb
MAX_PARAMETER_LIMIT=1000

# =============================================================================
# DEVELOPMENT TOOLS (DISABLE IN PRODUCTION)
# =============================================================================

# API Documentation
ENABLE_SWAGGER_UI=false

# Redis Commander (Development Only)
REDIS_COMMANDER_ENABLED=false
REDIS_COMMANDER_PORT=8081
REDIS_COMMANDER_PASSWORD=REPLACE_WITH_ACTUAL_REDIS_COMMANDER_PASSWORD

# pgAdmin (Development Only)
PGADMIN_ENABLED=false
PGADMIN_PORT=8080
PGADMIN_EMAIL=admin@yourdomain.com
PGADMIN_PASSWORD=REPLACE_WITH_ACTUAL_PGADMIN_PASSWORD

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================

# SSL Certificate Paths
SSL_ENABLED=true
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/private.key
SSL_CA_PATH=/etc/nginx/ssl/ca_bundle.crt

# Nginx Configuration
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# HTTPS Redirect
HTTPS_REDIRECT=true
HTTPS_PORT=443

# SSL Security Headers
ENABLE_HSTS=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# =============================================================================
# DOCKER & DEPLOYMENT CONFIGURATION
# =============================================================================

# Build Configuration
BUILD_TARGET=production
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1

# Resource Limits
BACKEND_MEMORY_LIMIT=4G
BACKEND_CPU_LIMIT=2.0
BACKEND_MEMORY_RESERVATION=2G
BACKEND_CPU_RESERVATION=1.0
BACKEND_REPLICAS=2

FRONTEND_MEMORY_LIMIT=2G
FRONTEND_CPU_LIMIT=1.0
FRONTEND_REPLICAS=2

# Data Persistence
DATA_PATH=/var/lib/waste-management

# =============================================================================
# BACKUP & DISASTER RECOVERY
# =============================================================================

# Backup Configuration
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION=true

# Disaster Recovery
DR_REPLICATION_ENABLED=true
DR_BACKUP_LOCATION=s3://your-backup-bucket/waste-management
DR_RESTORE_POINT_INTERVAL=4

# =============================================================================
# COMPLIANCE & SECURITY MONITORING
# =============================================================================

# Audit Logging
ENABLE_AUDIT_LOGGING=true
AUDIT_LOG_ALL_REQUESTS=true
AUDIT_LOG_RETENTION_DAYS=2555

# SOC 2 Compliance
SOC2_COMPLIANCE_MODE=true
SOC2_MONITORING_ENABLED=true
SOC2_AUDIT_TRAIL=true

# Data Protection
ENABLE_DATA_ENCRYPTION_AT_REST=true
ENABLE_FIELD_LEVEL_ENCRYPTION=true
PII_ANONYMIZATION=true

# =============================================================================
# BUSINESS CONFIGURATION
# =============================================================================

# Company Information
COMPANY_NAME=Waste Management Solutions
COMPANY_EMAIL=support@yourdomain.com
COMPANY_PHONE=+1-555-0123
COMPANY_ADDRESS=123 Business St, City, State 12345

# Service Configuration
SERVICE_AREAS=["area1", "area2", "area3"]
DEFAULT_SERVICE_FREQUENCY=weekly
DEFAULT_CURRENCY=USD
DEFAULT_TIMEZONE=America/New_York

# Billing Configuration
BILLING_CYCLE=monthly
LATE_PAYMENT_FEE=25.00
GRACE_PERIOD_DAYS=7

# =============================================================================
# RESOURCE MONITORING THRESHOLDS
# =============================================================================

# CPU Monitoring
CPU_WARNING_THRESHOLD=70
CPU_CRITICAL_THRESHOLD=85

# Memory Monitoring
MEMORY_WARNING_THRESHOLD=80
MEMORY_CRITICAL_THRESHOLD=90

# Disk Space Monitoring
DISK_WARNING_THRESHOLD=80
DISK_CRITICAL_THRESHOLD=90

# Database Connection Pool
DB_POOL_WARNING_THRESHOLD=150
DB_POOL_CRITICAL_THRESHOLD=170

# Response Time Monitoring
API_RESPONSE_TIME_WARNING_MS=2000
API_RESPONSE_TIME_CRITICAL_MS=5000

# =============================================================================
# BUSINESS CONTINUITY & CIRCUIT BREAKERS
# =============================================================================

# Circuit Breaker Configuration
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RESET_TIMEOUT=60000
CIRCUIT_BREAKER_MONITORING=true

# Graceful Shutdown
GRACEFUL_SHUTDOWN_TIMEOUT=30000
DRAIN_CONNECTIONS_TIMEOUT=10000

# =============================================================================
# DOMAIN & CDN CONFIGURATION
# =============================================================================

# Domain Configuration
PRIMARY_DOMAIN=yourdomain.com
API_SUBDOMAIN=api.yourdomain.com
ADMIN_SUBDOMAIN=admin.yourdomain.com
MONITORING_SUBDOMAIN=monitoring.yourdomain.com

# CDN Configuration
CDN_ENABLED=true
CDN_STATIC_ASSETS_URL=https://cdn.yourdomain.com
CDN_CACHE_CONTROL=public, max-age=31536000, immutable

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Core Features
CUSTOMER_PORTAL_ENABLED=true
DRIVER_MOBILE_APP_ENABLED=true
REAL_TIME_TRACKING_ENABLED=true
AUTOMATED_BILLING_ENABLED=true

# Advanced Features
AI_ROUTE_OPTIMIZATION_ENABLED=true
PREDICTIVE_MAINTENANCE_ENABLED=false
CHATBOT_INTEGRATION_ENABLED=false
MOBILE_NOTIFICATIONS_ENABLED=true

# Beta Features
VOICE_COMMANDS_ENABLED=false
BLOCKCHAIN_VERIFICATION_ENABLED=false
IOT_SENSOR_INTEGRATION_ENABLED=false

# =============================================================================
# DEPLOYMENT INSTRUCTIONS
# =============================================================================
#
# 1. Copy this file:
#    cp .env.example .env.production
#
# 2. Generate secrets:
#    chmod +x ./scripts/setup-secrets.sh
#    ./scripts/setup-secrets.sh
#
# 3. Replace placeholders with actual values:
#    - Database credentials from secrets/
#    - External service API keys
#    - SSL certificate paths
#    - Domain-specific URLs
#
# 4. Validate configuration:
#    ./scripts/setup-secrets.sh --validate
#
# 5. Deploy with Docker Compose:
#    chmod +x ./deploy-production.sh
#    ./deploy-production.sh --profile full
#
# =============================================================================
#
# SECURITY CHECKLIST:
# □ All REPLACE_WITH_ACTUAL_* values updated
# □ Strong passwords generated (32+ characters)
# □ SSL certificates installed and valid
# □ External service webhooks configured
# □ Database SSL connection verified
# □ Redis password authentication enabled
# □ JWT keys generated with proper permissions (600)
# □ Secrets directory permissions set to 700
# □ Environment file permissions set to 600
# □ Production domain configured in CORS_ORIGIN
# □ HTTPS redirect enabled
# □ Rate limiting configured for production load
# □ Monitoring and alerting configured
# □ Backup and disaster recovery tested
#
# =============================================================================